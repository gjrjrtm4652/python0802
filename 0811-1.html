<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <hr>

    <div class="carousel wrapper">
        <div class = "carousel">
            <div class="carousel_item"><img class ="show" src="images/img/1.png" alt=""></div>
            <div class="carousel_item"><img class ="show" src="images/img/2.png" alt=""></div>
            <div class="carousel_item"><img class ="show" src="images/img/3.png" alt=""></div>
            <div class="carousel_item"><img class ="show" src="images/img/4.png" alt=""></div>
            <div class="carousel_item"><img class ="show" src="images/img/5.png" alt=""></div>
        </div>
    </div>

    <hr>

    <div> normal </div>

    <div id="scale"> scale </div>

    <div id= "rotate">rotate </div>

    <div id= "skew"> skew </div>

    <div id= "move"> move </div>

    <script>
        // Carusel
        !(function(d){
            console.log('load');
            var itemClassName = 'carousel_item';
            var items = d.getElementsByClassName(itemClassName);
            var totalitems = items.length;
            var slide = 0; // index of item
            var moving = true;

            // css class change
            setInitialClasses();
            setEventListensers();
            moving = false;
            // start animate 
            timer = setInterval(moveNext, 500);

            // 실제 실행 코드들의 작성
            function setInitialClasses(){
                itmes[totalitems -1].classList.add('prev');
                itmes[0].classList.add('active');
                itmes[1].classList.add('next');
            }
            function setEventListensers(){
                for(let i=0; i< items.length; i+=1){
                    items[i].addEventListener('mouseover', function(){
                        clearInterval(timer); // stop
                    });
                    items[i].addEventListener('mouseout', function(){
                        timer = setInterval(moveNext, 500); // re-start
                    });
                }
            }
            function moveNext(){
                // items 배열 요소번호
                if( !moving){
                    if( slide === (totalitems-1) ){
                        slide = 0; // 마지막 요소 다음에 보여질 요소는 0번째 요소
                    }else{
                        slide += 1;
                    }
                }
                moveCarouselto(slide);
            }

            function moveCarouselto(slide){
                // 요소번호 선택 -> css .prev, .active, .next
                if(!moveing){
                    // 
                    var newPrev = slide - 1; // 현재prev가 있기 대문에 
                    var newNext = slide + 1;
                    var oldPrev = slide - 2;
                    var oldNext = slide + 2;

                    if( (totalitems-1) > 3){ 
                        // index range
                        if( newPrev <= 0){
                            // oldPrev < 0, index out of bounds
                            oldPrev = (totalitems-1);
                        }else if( newNext >= (totalitems-1) ){
                            oldNext = 0;
                        }
                        // check, update
                        if( slide == 0){
                            newPrev = (totalitems - 1);
                            oldPrev = newPrev - 1;
                            oldNext = (slide+1);
                        }
                    } 
                }
            }

        }(document));

    </script>


</body>
</html>